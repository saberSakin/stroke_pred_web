<!DOCTYPE html>
<html>
  <head>
    <!-- Basic -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- Mobile Metas -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <!-- Site Metas -->
    <link rel="icon" href="static/images/fevicon.png" type="image/gif" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />

    <title>Brain Stroke Prediction</title>

    <!-- bootstrap core css -->
    <link rel="stylesheet" type="text/css" href="static/css/bootstrap.css" />

    <!-- fonts style -->
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap"
      rel="stylesheet"
    />

    <!-- font awesome style -->
    <link href="static/css/font-awesome.min.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      type="text/css"
      href="{{ url_for('static', filename='style.css') }}"
    />

    <!-- Custom styles for this template -->
    <link href="static/css/style.css" rel="stylesheet" />
    <!-- responsive style -->
    <link href="static/css/responsive.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      type="text/css"
      href="{{ url_for('static', filename='css/styles.css') }}"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
  </head>

  <body>
    <div class="hero_area">
      <!-- header section strats -->
      <header class="header_section">
        <div class="container-fluid">
          <nav class="navbar navbar-expand-lg custom_nav-container">
            <a class="navbar-brand" href="">
              <span></span>
            </a>

            <button
              class="navbar-toggler"
              type="button"
              data-toggle="collapse"
              data-target="#navbarSupportedContent"
              aria-controls="navbarSupportedContent"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class=""> </span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav ml-auto">
                <li class="nav-item active">
                  <a class="nav-link" href=""
                    >Home <span class="sr-only">(current)</span></a
                  >
                </li>
              </ul>
            </div>
          </nav>
        </div>
      </header>
      <!-- end header section -->

      <!-- slider section -->

      <section class="slider_section">
        <div id="customCarousel1" class="carousel slide" data-ride="carousel">
          <div class="carousel-inner">
            <div class="carousel-item active">
              <div class="container">
                <h1 class="hhhh">Brain Stroke Prediction</h1>
                <div class="container1">
                  <form
                    action="/predict"
                    method="post"
                    onsubmit="return submitForm()"
                    class="form-text"
                  >
                    <div class="form-group">
                      <label for="gender">Gender:</label>
                      <select name="gender" id="gender">
                        <option value=""></option>
                        <!-- Set the default option to an empty value -->
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label for="age">Age:</label>
                      <input
                        type="number"
                        name="age"
                        id="age"
                        required
                        value=""
                      />
                      <!-- Set value to an empty string -->
                    </div>
                    <div class="form-group">
                      <label for="hypertension">Hypertension:</label>
                      <select name="hypertension" id="hypertension">
                        <option value=""></option>
                        <!-- Set the default option to an empty value -->
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label for="heart_disease">Heart Disease:</label>
                      <select name="heart_disease" id="heart_disease">
                        <option value=""></option>
                        <!-- Set the default option to an empty value -->
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label for="ever_married">Ever Married:</label>
                      <select name="ever_married" id="ever_married">
                        <option value=""></option>
                        <!-- Set the default option to an empty value -->
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label for="work_type">Work Type:</label>
                      <select name="work_type" id="work_type">
                        <option value=""></option>
                        <!-- Set the default option to an empty value -->
                        <option value="Govt job">Govt job</option>
                        <option value="Never worked">Never worked</option>
                        <option value="Private">Private</option>
                        <option value="Self-employed">Self-employed</option>
                        <option value="children">Children</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label for="Residence_type">Residence Type:</label>
                      <select name="Residence_type" id="Residence_type">
                        <option value=""></option>
                        <!-- Set the default option to an empty value -->
                        <option value="urban">Urban</option>
                        <option value="rural">Rural</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label for="avg_glucose_level"
                        >Average Glucose Level:</label
                      >
                      <input
                        type="number"
                        step="0.01"
                        name="avg_glucose_level"
                        id="avg_glucose_level"
                        required
                        value=""
                      />
                      <!-- Set value to an empty string -->
                    </div>
                    <div class="form-group">
                      <label for="bmi">BMI:</label>
                      <input
                        type="number"
                        step="0.01"
                        name="bmi"
                        id="bmi"
                        required
                        value=""
                      />
                      <!-- Set value to an empty string -->
                    </div>
                    <div class="form-group">
                      <label for="smoking_status">Smoking Status:</label>
                      <select name="smoking_status" id="smoking_status">
                        <option value=""></option>
                        <!-- Set the default option to an empty value -->
                        <option value="formerly smoked">Formerly Smoked</option>
                        <option value="never smoked">Never Smoked</option>
                        <option value="smokes">Smokes</option>
                        <option value="unknown">Unknown</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <button type="submit">Predict</button>
                    </div>
                  </form>
                  <div class="result"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- about section -->

    <section class="about_section layout_padding-bottom">
      <div class="container">
        <div class="row">
          <div class="col-md-6">
            <div class="detail-box">
              <div class="heading_container">
                <h2>About</h2>
              </div>
              <p>
                The Brain Stroke Prediction model is trained on publicly
                available dataset on kaggle using Machine Learning. Instert your
                data to test it.
              </p>
            </div>
          </div>
          <div class="col-md-6">
            <div class="img-box">
              <img src="static/images/about-img.png" alt="" class="abt" />
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- end about section -->

    <!-- info section -->

    <section class="info_section layout_padding2">
      <div class="container">
        <div class="row">
          <div
            class="col-md-6 d-flex justify-content-between align-items-center"
          >
            <div class="info_contact">
              <h4>Contact</h4>
              <div class="info_social">
                <a href="mailto:md.shakin18@gmail.com" target="_blank">
                  <i class="fa fa-envelope" aria-hidden="true"></i>
                  <span>1804046@student.ruet.ac.bd</span>
                </a>
                <a href="https://www.facebook.com/54k1N/" target="_blank">
                  <i class="fa-brands fa-facebook" aria-hidden="true"></i>
                </a>
                <a href="https://github.com/saberSakin" target="_blank">
                  <i class="fa-brands fa-github" aria-hidden="true"></i>
                </a>
                <a
                  href="https://www.linkedin.com/in/saber-sakin-287a70218/"
                  target="_blank"
                >
                  <i class="fa-brands fa-linkedin" aria-hidden="true"></i>
                </a>
                <a
                  href="https://www.instagram.com/saber.sakin/"
                  target="_blank"
                >
                  <i class="fa-brands fa-instagram" aria-hidden="true"></i>
                </a>
                <a
                  href="https://sabersakin.github.io/portfolio1/"
                  target="_blank"
                >
                  <i class="fa-solid fa-user" aria-hidden="true"></i>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- end info section -->

    <!-- jQery -->
    <script src="static/js/jquery-3.4.1.min.js"></script>
    <!-- bootstrap js -->
    <script src="static/js/bootstrap.js"></script>
    <!-- custom js -->
    <script>
      function submitForm() {
        const form = document.querySelector("form");
        const resultDiv = document.querySelector(".result");

        // Map user-friendly options to numerical values
        const data = {
          gender: form.gender.value,
          age: parseInt(form.age.value),
          hypertension: form.hypertension.value,
          heart_disease: form.heart_disease.value,
          ever_married: form.ever_married.value,
          work_type: form.work_type.value,
          Residence_type: form.Residence_type.value,
          avg_glucose_level: parseFloat(form.avg_glucose_level.value),
          bmi: parseFloat(form.bmi.value),
          smoking_status: form.smoking_status.value,
        };

        // Send a POST request to the /predict endpoint with JSON data
        fetch("/predict", {
          method: "POST",
          body: JSON.stringify(data),
          headers: {
            "Content-Type": "application/json",
          },
        })
          .then((response) => {
            if (response.ok) {
              return response.json();
            } else {
              throw new Error(`Request failed with status: ${response.status}`);
            }
          })
          .then((data) => {
            if (data.result && data.probability !== undefined) {
              resultDiv.innerHTML = `<p>${data.result}</p><p>Prediction Probability: ${data.probability}</p>`;
            } else {
              resultDiv.innerHTML = "Invalid response from the server.";
            }
          })
          .catch((error) => {
            console.error("Error:", error);
            resultDiv.innerHTML =
              "An error occurred while making the prediction.";
          });

        return false; // Prevent the form from submitting via a traditional HTTP request
      }
    </script>
  </body>
</html>
